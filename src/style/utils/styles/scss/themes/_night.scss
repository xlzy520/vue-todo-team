$theme: $dark-blue;
$theme-color: $night-color;
$theme-1: rgba($theme, 0.1);
$theme-2: rgba($theme, 0.2);

$theme-input-bg: $night-input-bg;
$theme-input-active-border-color: $night-input-active-border-color;
$theme-dropdown-item-hover-bg: $night-dropdown-item-hover-bg;
$theme-task-active-bg: $night-task-active-bg;
$theme-task-hover-bg: $night-task-hover-bg;
$theme-column-task-active-bg: $night-column-task-active-bg;
$theme-column-task-hover-bg: $night-column-task-hover-bg;
$theme-sidebar-active-bg: $night-sidebar-active-bg;
$theme-sidebar-hover-bg: $night-sidebar-hover-bg;
$theme-mini-bg: $night-mini-bg;
$theme-mini-btn-color: $night-mini-btn-color;
$theme-mini-btn-bg: $night-mini-btn-bg;
$theme-mini-header-color: $night-mini-header-color;
$theme-mini-task-tip-bg: $night-mini-task-tip-bg;
$theme-mini-day-active-task-tip-bg: $night-mini-day-active-task-tip-bg;
$theme-mini-day-in-month-color: $night-mini-day-in-month-color;
$theme-mini-day-out-month-color: $night-mini-day-out-month-color;
$theme-mini-day-hover-bg: $night-mini-day-hover-bg;
$theme-mini-day-active-bg: $night-mini-day-active-bg;
$theme-mini-day-active-color: $night-mini-day-active-color;
$theme-mini-today-color: $night-mini-today-color;
$theme-mini-fake-bg: $night-mini-fake-bg;
$theme-mini-fake-color: $night-mini-fake-color;
$theme-pomotimer-bg: $night-pomotimer-bg;
$theme-pomotimer-time-color: $night-pomotimer-time-color;
$theme-pomotimer-title-color: $night-pomotimer-title-color;
$theme-pomotimer-setting-color: $night-pomotimer-setting-color;
$theme-pomotimer-border-top-color: $night-pomotimer-border-top-color;
$theme-pomotimer-progress-color: $night-pomotimer-progress-color;
$theme-column-bg: $night-column-bg;
$theme-button-primary-bg: $night-button-primary-bg;
$theme-button-primary-hover-bg: $night-button-primary-hover-bg;
$theme-button-primary-active-bg: $night-button-primary-active-bg;
$theme-button-disabled-bg: $night-button-disabled-bg;

.night-dark-theme {
    // 新的直接这么写
    .fill-theme {
        fill: $theme;
    }

    .fill-theme-force {
        fill: $theme !important;
    }

    .color-theme {
        color: $night-black;
    }

    .border-theme {
        border-color: $night-black;
    }

    .calendar-min-cal {
        .k-calendar {
            .k-task:after {
                background-color: $theme;
            }
        }
    }

    .background-input {
        background-color: $theme-input-bg;
    }

    .calendar-min-cal .kalendae,
    .timecard .kalendae,
    .kalendae.k-pop {
        .k-calendar {
            .k-days span {
                &.k-selected,
                &:hover {
                    &:before {
                        background-color: $theme;
                    }
                }

                &.k-range {
                    &:before {
                        background-color: $theme-2;
                    }
                }

                &.k-selected.k-range-begin,
                &.k-selected.k-range-end {
                    &:before {
                        background-color: $theme !important;
                    }

                    &:after {
                        background-color: $theme-2;
                    }
                }
            }
        }
    }

    .min-cal .k-calendar {
        .k-title {
            .nav-selector {
                .nav-menu {
                    .month li.active a.month-change {
                        background-color: $theme;
                        color: $white;
                    }
                }
            }
        }
    }

    .active .i-5 {
        fill: $theme;
        color: $theme;
    }

    .highlight {
        .i-2 {
            fill: $theme;
            // color: $white;
        }
    }

    .active,
    .single-selected-item,
    .option-item-selected {
        .i-3-1 {
            fill: $theme;
        }
    }

    div > a:hover .i-5,
    li a:hover .i-5 {
        fill: $theme;
    }

    .active > .i-6 {
        fill: $theme;
        color: $theme;
    }

    .notification {
        .btn-accept {
            color: $theme;
            border-color: $theme;

            &:focus,
            &:hover {
                background-color: $theme-1;
            }

            &:active {
                background-color: $theme-2;
            }

            &[disabled] {
                background-color: $theme;
                color: $white8;

                &:focus,
                &:hover {
                    background-color: $theme;
                }

                &:active {
                    background-color: $theme;
                }
            }
        }
    }

    .advance-repeat-preview {
        color: $theme;
    }

    .tag-item {
        background-color: rgba(#5979de, 0.36);
        color: #aeb6ce;
        .tag-name {
            color: #aeb6ce;
        }
    }

    .tag-list {
        .tag-item:not(.new):not(.disable):hover {
            background-color: rgba(#5979de, 0.54);
        }
    }

    textarea.input-fake,
    input {
        &:focus {
            border-color: $theme;
        }
    }

    .fill-input,
    .task-input,
    .search-input,
    .title-edit {
        background-color: $theme-input-bg;

        &:focus,
        &.focus {
            border-color: $theme-input-active-border-color;
        }
    }

    .repeat-digit,
    .redeem-code {
        &:focus,
        &.focus {
            border-color: $theme;
        }
    }

    .comments-footer textarea {
        background-color: $theme-input-bg !important;

        &:focus,
        &.focus {
            border-color: $theme-input-active-border-color !important;
        }
    }

    .CodeMirror-hints {
        .CodeMirror-hint {
            &:hover,
            &:focus,
            &.open {
                background-color: $theme-dropdown-item-hover-bg;
            }
        }
        .CodeMirror-hint-active {
            background-color: $theme-dropdown-item-hover-bg;
        }
    }

    .dropdown-menu-menu-submenu-open,
    .dropdown-menu-item:hover,
    .dropdown-menu-menu-item-active,
    .multi-select-menu .option-item:hover {
        background-color: $theme-dropdown-item-hover-bg;
    }

    .dropdown-menu-menu-submenu-open,
    .dropdown-menu-item:hover,
    .dropdown-menu-menu-item-active {
        background-color: $theme-dropdown-item-hover-bg;
    }

    .dropdown-menu-item > a:hover,
    .dropdown-menu-menu-item > a:hover {
        background-color: transparent;
    }

    #pomodoro-timer {
        .wrapper {
            background-color: $theme-pomotimer-bg;
            border-color: $theme-pomotimer-border-top-color;
            .detail {
                .time {
                    color: $theme-pomotimer-time-color;
                }
                .title {
                    color: $theme-pomotimer-title-color;
                }
                .pomodoro-settings svg {
                    fill: $theme-pomotimer-setting-color;
                }
            }

            .icons {
                svg {
                    fill: $theme-pomotimer-progress-color;
                }
                .circle-bg {
                    border-color: rgba($theme-pomotimer-progress-color, 0.36);
                }
                .right-circle {
                    > div {
                        border-right-color: $theme-pomotimer-progress-color;
                        border-top-color: $theme-pomotimer-progress-color;
                    }
                }

                .left-circle {
                    > div {
                        border-left-color: $theme-pomotimer-progress-color;
                        border-bottom-color: $theme-pomotimer-progress-color;
                    }
                }
                &:hover {
                    .circle-bg {
                        border-color: rgba($theme-pomotimer-progress-color, 0.48);
                    }
                }
            }
        }
    }

    // 小日历视图背景色
    .min-cal {
        background-color: $theme-mini-bg;
    }

    .min-cal,
    .calendar-min-cal {
        .fake-enlarge-mini-cal {
            &::before {
                background-color: $theme-mini-fake-bg;
            }
            &::after {
                border-color: transparent transparent $theme-mini-fake-color transparent;
            }
        }

        .fake-narrow-mini-cal {
            &::before {
                background-color: $theme-mini-fake-bg;
            }
            &::after {
                border-color: $theme-mini-fake-color transparent transparent transparent;
            }
        }

        .k-calendar {
            .k-title {
                .k-btn {
                    fill: $theme-mini-btn-color;

                    &:hover {
                        background-color: $theme-mini-btn-bg;
                    }
                }
                .nav-selector {
                    .nav-toggle {
                        color: $theme-mini-day-in-month-color;
                    }
                    .nav-menu {
                        .year {
                            color: $theme-mini-day-in-month-color;
                            a {
                                color: $theme-mini-day-in-month-color;
                            }
                            .active a {
                                color: $theme-mini-today-color;
                            }
                        }

                        .month {
                            li.active a.month-change {
                                background-color: $theme-mini-day-active-bg;
                                color: $theme-mini-day-active-color;
                            }
                            a {
                                color: $theme-mini-day-in-month-color;
                            }

                            a.month-current {
                                color: $theme-mini-today-color;
                            }

                            a:not(.disable) {
                                &:hover {
                                    background-color: $theme-mini-day-hover-bg;
                                }
                            }
                        }
                    }
                }
            }
            .k-header {
                color: $theme-mini-header-color;
            }
            .k-task {
                &:after {
                    background-color: $theme-mini-task-tip-bg;
                }
            }

            .k-days {
                color: $theme-mini-day-in-month-color;

                span {
                    &.k-selected {
                        color: $theme-mini-day-active-color;

                        &:before {
                            background-color: $theme-mini-day-active-bg;
                        }

                        &:after {
                            background-color: $theme-mini-day-active-task-tip-bg;
                        }
                    }

                    &.kalendae-day-drag-hovered,
                    &:not(.k-selected):hover {
                        &:before {
                            background-color: $theme-mini-day-hover-bg;
                        }
                    }
                }

                .k-today {
                    color: $theme-mini-today-color;
                }

                .k-selected {
                    &:before {
                        background-color: $theme-mini-day-active-bg;
                    }
                }
            }
            span,
            a {
                &.k-out-of-month,
                &.disable {
                    color: $theme-mini-day-out-month-color;
                }
            }
        }
    }

    .lists {
        li > a,
        div.p-sort-help > a,
        .f-header > a,
        .fake-li > a,
        .l-new > a {
            color: rgba($night-basestyle-font-color, 0.75);

            svg {
                fill: rgba($night-basestyle-font-color, 0.54);
            }

            &:hover {
                background-color: $theme-sidebar-hover-bg;
            }

            .count {
                color: rgba($night-basestyle-font-color, 0.36);
            }
        }

        .team-project-empty {
            color: rgba($night-basestyle-font-color, 0.56);
            background-color: $theme-sidebar-hover-bg;
        }

        .team-header-box {
            .count {
                color: rgba($night-basestyle-font-color, 0.54);
            }
        }

        .active > a {
            background-color: $theme-sidebar-active-bg;
            color: rgba($night-basestyle-font-color, 0.85);

            svg {
                fill: rgba($night-basestyle-font-color, 0.85);
            }

            .count {
                color: rgba($night-basestyle-font-color, 0.85);
            }
            &:hover {
                background-color: $theme-sidebar-active-bg;
            }
        }

        .l-l-t {
            a.l-tab {
                color: rgba($night-basestyle-font-color, 0.36);
                border-bottom-color: rgba($night-basestyle-font-color, 0.04);
                &.t-active {
                    color: rgba($night-basestyle-font-color, 0.85);
                }
            }
        }

        .ui-sortable-helper a,
        .active.ui-sortable-helper a {
            background-color: transparent !important;
        }
    }

    .l-divider {
        background-color: rgba($night-basestyle-font-color, 0.04);
    }

    .task {
        &:hover {
            .l-task-bg {
                background-color: $theme-task-hover-bg;
            }
        }

        &.selected,
        &.active {
            .l-task-bg {
                background-color: $theme-task-active-bg !important;
            }
        }
    }

    .sub-task {
        &.opened {
            &::before {
                background-color: $theme-task-hover-bg;
            }
        }
    }

    .column {
        .task {
            .l-task:hover {
                background-color: $theme-column-task-hover-bg;
            }

            &.active,
            &.selected {
                .l-task {
                    background-color: $theme-column-task-active-bg !important;
                }
            }
        }
    }

    button.btn-primary,
    .button.btn-primary,
    .btn.btn-primary {
        background-color: $theme-button-primary-bg;
        border: 1px solid rgba(0, 0, 0, 0.12);

        &:hover,
        &:focus {
            background-color: $theme-button-primary-hover-bg;
        }

        &:active {
            background-color: $theme-button-primary-active-bg;
        }
    }

    button[disabled].btn-primary,
    .button[disabled].btn-primary,
    .btn[disabled].btn-primary {
        background-color: $theme-button-disabled-bg;
    }

    .column-list-view {
        .column {
            .column-main,
            &.new-column {
                background-color: $night-black;
            }
        }
    }

    .tkcalendar-view {
        .c-task {
            color: $theme-color;

            &.checked,
            &.c-task-remain {
                color: rgba($theme-color, 0.48);
            }

            svg {
                fill: $theme-color;
            }

            &.pop-task {
                color: $white;

                &.checked {
                    color: rgba($theme-color, 0.95);
                }
            }
        }
    }

    button.btn-secondary,
    button.btn-cancel,
    .button.btn-secondary,
    .button.btn-cancel,
    .btn.btn-secondary,
    .btn.btn-cancel {
        background-color: #525354;
        border-color: transparent;

        &:hover,
        &:focus {
            background-color: #494a4b;
            border-color: transparent;
        }

        &:active {
            background-color: #3c3c3e;
            border-color: transparent;
        }
    }
}
